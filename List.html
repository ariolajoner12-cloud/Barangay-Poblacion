<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barangay Poblacion - Employee List</title>
<style>
body{font-family:Arial,sans-serif; padding:20px; background:#f0f8ff;}
h2{color:#0d6efd; text-align:center;}
#searchBar{width:100%; max-width:400px; padding:6px 10px; border-radius:6px; border:1px solid #ccc; font-size:14px; margin:10px auto; display:block;}
table{border-collapse:collapse; width:100%; margin-top:10px;}
th,td{border:1px solid #ccc; padding:6px; text-align:left; font-size:13px;}
th{background:#0d6efd; color:white;}
tr:nth-child(even){background:#f5faff;}
.pic-preview{width:50px; height:50px; object-fit:cover; border-radius:6px; border:1px solid #ddd;}
@media(max-width:768px){
    table, thead, tbody, th, td, tr{display:block;}
    th{position:sticky; top:0;}
    tr{margin-bottom:15px; border-bottom:2px solid #ccc;}
    td{border:none; position:relative; padding-left:50%;}
    td:before{position:absolute; left:10px; width:45%; font-weight:bold;}
    td:nth-of-type(1):before{content:"ID";}
    td:nth-of-type(2):before{content:"Photo";}
    td:nth-of-type(3):before{content:"Name";}
    td:nth-of-type(4):before{content:"Birthday";}
    td:nth-of-type(5):before{content:"Blood";}
    td:nth-of-type(6):before{content:"Address";}
    td:nth-of-type(7):before{content:"Contact";}
    td:nth-of-type(8):before{content:"SSS";}
    td:nth-of-type(9):before{content:"PhilHealth";}
    td:nth-of-type(10):before{content:"Pag-IBIG";}
    td:nth-of-type(11):before{content:"Emergency Name";}
    td:nth-of-type(12):before{content:"Emergency Contact";}
}
</style>
</head>
<body>
<h2>Barangay Poblacion - Employee List</h2>
<input type="text" id="searchBar" placeholder="Search by name, contact, or address...">

<table>
<thead>
<tr>
<th>ID</th>
<th>Photo</th>
<th>Name</th>
<th>Birthday</th>
<th>Blood Type</th>
<th>Address</th>
<th>Contact</th>
<th>SSS</th>
<th>PhilHealth</th>
<th>Pag-IBIG</th>
<th>Emergency Name</th>
<th>Emergency Contact</th>
</tr>
</thead>
<tbody id="employeeBody"></tbody>
</table>

<script>
let employees = JSON.parse(localStorage.getItem('employees_v1')) || [];

function renderTable(filter='') {
    const tbody = document.getElementById('employeeBody');
    tbody.innerHTML = '';
    let filtered = employees.filter(e => 
        (e.name||'').toLowerCase().includes(filter) ||
        (e.contact||'').toLowerCase().includes(filter) ||
        (e.address||'').toLowerCase().includes(filter)
    );
    filtered.forEach(e => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${e.idNo}</td>
            <td>${e.photo ? `<img src="${e.photo}" class="pic-preview">` : ''}</td>
            <td>${e.name}</td>
            <td>${e.birthday}</td>
            <td>${e.blood}</td>
            <td>${e.address}</td>
            <td>${e.contact}</td>
            <td>${e.sss}</td>
            <td>${e.phil}</td>
            <td>${e.pagibig}</td>
            <td>${e.emergency}</td>
            <td>${e.emergencyContact}</td>
        `;
        tbody.appendChild(tr);
    });
}

// Initial render
renderTable();

// Search functionality
document.getElementById('searchBar').addEventListener('input', e => {
    renderTable(e.target.value.toLowerCase());
});
</script>
</body>
</html>
